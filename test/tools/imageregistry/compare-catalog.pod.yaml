apiVersion: v1
kind: Pod
metadata:
  name: catalogd-compare
  namespace: catalogd-e2e
spec:
  containers:
    - image: radial/busyboxplus:curl
      imagePullPolicy: IfNotPresent
      command: ["sh", "-c", "curl -k https://catalogd-catalogserver.olmv1-system.svc.cluster.local/catalogs/test-catalog/all.json | diff build-contents/expected_all.json -"]
      name: compare-catalog-contents
      volumeMounts:
        - mountPath: /build-contents
          name: build-contents
          readOnly: true
  restartPolicy: Never
  volumes:
    - configMap:
        name: catalogd-e2e.build-contents
      name: build-contents
